## 협력,역할,책임


1. 협력
   - 협력은 다른사람에게 요청하는 것 부터 시작  

            왕 -> 목격자를 불러오라 -> 토끼 -> 증인석에 입장하라 -> 모자장수

   - 협력에 참여하는 객체는 요청에 **응답할 책임을** 갖는다.


2. 책임
   - 적절한 행동을 할 의무가 있는 경우 해당 **객체가 책임을** 가진다고 말한다.
   - 객체와 책임이 이리저리 부유하는 상황에서 변경에 취약한 비자율 적인 객체를 낳게된다.
      (책임을 잘 분류하지 못한다면 여러 책임을 하나의 객체가 맡을 수 있다.)

   책임의 분류
      * 하는것
         - 객체를 생성하거나 계산을 하는 등의 스스로 하는것
         - 다른 객체의 행동을 시작시키는 것
         - 다른 객체의 활동을 제어하고 조절하는 것
      
      * 아는것
         - 개인적인 정보에 관해 아는것
         - 관련된 객체에 관해 아는것
         - 자신이 유도하거나 계산할 수 있는 것에 관해 아는것

       **즉 책임은 외부에 제공해 줄 수 있는 정보와 외부에 제공해 줄 수 있는 서비스의 목록**

   - **책임과 메시지에 대한 대략적인 윤곽을 먼저 잡아라!!!!**
      

3. 역할
   - 역할 설정을 통해 재사용 할 수 있는 상황이 나온다. 
     (왕이 하는 협력 속 역할은 판사 왕을 판사가 하는 행동에 집중해 역할을 부여할 시 
      메시지를 동일한 방식으로 이해하는 객체들은 이 협력속에 참여 판사라는 역할을 부여받아 참여할 수 있다.)

   - 역할은 단순성, 유연성, 재사용성을 뒷받침한다.
     ( 객체의 불필요한 행동 제거 -> 단순성) 
     ( 역할을 수행하는 객체를 쉽게 바꿀 수 있다 -> 유연성)
     ( 동일한 역할을 여러 협력에서 할 수 있다 -> 재사용성)

   - 역할의 가장 큰 가치는 협력의 추상화. (불필요한 부분을 제거 협력을 단순하게 바꾸자)
   - 역할은 때론 역할이 가지고 있는 책임보다 더 큰 책임을 갖는다. ( 일반화/특수화 관계)


4. 객체의 모양을 결정하는 협력

   - 제발 데이터 저장을 위해 객체가 존재한다는 생각을 버리자.
   - 설계 순서
     x 왕의 인스턴스 설계시 우리는 왕의 겉모습부터 설계하고 그걸 바탕으로 클래스를 개발할 것이다. (데이터 주도개발)
     o **왕이 참여하는 협력(재판) 을 고려하고 왕이 하는 책임과 메시지를 먼저 추상화하고 설계하면 행동을 먼저 설계할 수 있다.( 책임 주도 개발)**

   - 책임 선택후 필요한 객체 선택 (재판을 진행할 책임, 판사객체 선택)


     1. 책임 주도 설계
        - UML먼저 그리고 클래스를 설계하지 말자.
        - 협력에 참가하는 책임들을 분석하고 더 작은 책임으로 쪼개고 메시지를 만들자! 
        - 그 후 객체를 정하자
        - 자신을 책임질 수 있는 자율적인 객체가 나온다. (응집도가 높아진 객체)

     2. 디자인 패턴
        - 책임 주도 설계의 결과표
        - 발생하는 문제와 해결책을 적어놨다.
        - [Composite 패턴](https://gmlwjd9405.github.io/2018/08/10/composite-pattern.html) 

     3. 테스트 주도 개발 (TDD)
       - **객체가 있다고 가정 어떤 메시지를 보내면 어떤 책임을 수행할지를 미리 결정!**
       - 테스트 주도 개발은 단순히 테스트를 작성하기 위함이 아닌 책임과 메시지를 먼저 결정하기 위한 개발방법론
       - 하기 어렵다...
